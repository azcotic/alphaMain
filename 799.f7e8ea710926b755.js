"use strict";(self.webpackChunkModernize=self.webpackChunkModernize||[]).push([[799],{6799:(K,C,c)=>{c.r(C),c.d(C,{ClientsRoutes:()=>J});var m=c(4006),d=c(9417),f=c(177),b=c(5596),u=c(8834),p=c(9213),r=c(9159),h=c(2102),_=c(9631),F=c(2798),t=c(4438),v=c(9398),E=c(7473),x=c(3);function k(i,l){if(1&i){const e=t.RV6();t.j41(0,"div",28)(1,"div",3)(2,"mat-form-field",14)(3,"mat-label"),t.EFF(4,"Nombre"),t.k0s(),t.nrm(5,"input",29),t.k0s(),t.j41(6,"mat-form-field",14)(7,"mat-label"),t.EFF(8,"Direcci\xf3n"),t.k0s(),t.nrm(9,"input",16),t.k0s()(),t.j41(10,"div",3)(11,"mat-form-field",14)(12,"mat-label"),t.EFF(13,"Tel\xe9fono"),t.k0s(),t.nrm(14,"input",17),t.k0s(),t.j41(15,"mat-form-field",14)(16,"mat-label"),t.EFF(17,"Estado"),t.k0s(),t.nrm(18,"input",30),t.k0s()(),t.j41(19,"div",3)(20,"mat-form-field",14)(21,"mat-label"),t.EFF(22,"Ciudad"),t.k0s(),t.nrm(23,"input",31),t.k0s(),t.j41(24,"button",32),t.bIt("click",function(){const n=t.eBV(e).index,s=t.XpG();return t.Njj(s.removeSucursal(n))}),t.j41(25,"mat-icon"),t.EFF(26,"delete"),t.k0s()()()()}if(2&i){const e=l.index,o=t.XpG();t.Y8G("formGroupName",e),t.R7$(24),t.Y8G("disabled",!o.isEdit)}}function j(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",33),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.addSucursal())}),t.EFF(1,"Agregar Sucursal"),t.k0s()}}function R(i,l){if(1&i){const e=t.RV6();t.j41(0,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.onSave())}),t.EFF(1,"Guardar"),t.k0s()}}let g=(()=>{class i{constructor(e,o,n,s,a){this.fb=e,this.dialogRef=o,this.clientsService=n,this.notificationService=s,this.data=a,this.isAdd=!1,this.letraRif="",this.rif="",this.isEdit=a.isEdit,this.isAdd=a.isAdd,console.log(a.client),a.client&&!this.isAdd?(this.letraRif=a.client?a.client.rif.charAt(0):"",this.rif=a.client?a.client.rif.substring(2):"",this.clientForm=this.fb.group({letraRIF:[{value:a.client?a.client.rif.charAt(0):"",disabled:!this.isEdit}],rif:[{value:a.client?a.client.rif.substring(2):"",disabled:!this.isEdit}],nombreFiscal:[{value:a.client.nombreFiscal,disabled:!this.isEdit}],direccion:[{value:a.client.direccion,disabled:!this.isEdit}],telefono:[{value:a.client.telefono,disabled:!this.isEdit}],email:[{value:a.client.email,disabled:!this.isEdit}],contactoPrincipal:[{value:a.client.contactoPrincipal,disabled:!this.isEdit}],sucursales:this.fb.array(a.client.sucursales?a.client.sucursales.map(Z=>this.createSucursalFormGroup(Z)):[])})):this.clientForm=this.fb.group({letraRIF:[{value:"",disabled:!this.isEdit}],rif:[{value:"",disabled:!this.isEdit}],nombreFiscal:[{value:"",disabled:!this.isEdit}],direccion:[{value:"",disabled:!this.isEdit}],telefono:[{value:"",disabled:!this.isEdit}],email:[{value:"",disabled:!this.isEdit}],contactoPrincipal:[{value:"",disabled:!this.isEdit}],sucursales:this.fb.array([])})}ngOnInit(){document.getElementById("letraRIF")?.focus(),document.getElementById("dialog")?.scrollTo(0,0)}get sucursales(){return this.clientForm.get("sucursales")}createSucursalFormGroup(e){return this.fb.group({nombre:[{value:e.nombre,disabled:!this.isEdit}],direccion:[{value:e.direccion,disabled:!this.isEdit}],telefono:[{value:e.telefono,disabled:!this.isEdit}],estado:[{value:e.estado,disabled:!this.isEdit}],ciudad:[{value:e.ciudad,disabled:!this.isEdit}]})}addSucursal(){this.sucursales.push(this.createSucursalFormGroup({}))}removeSucursal(e){this.sucursales.removeAt(e)}onSave(){let e=this.clientForm.value;this.isAdd?this.clientsService.createClient(e).subscribe(o=>{1==o.code?(this.notificationService.showSuccess("Cliente creado correctamente"),this.dialogRef.close(e)):this.notificationService.showError(o.message)}):this.isEdit?this.clientsService.updateClient(this.data.client._id,e).subscribe(o=>{1==o.code?(this.notificationService.showSuccess("Cliente actualizado correctamente"),this.dialogRef.close(this.clientForm.value)):this.notificationService.showError(o.message)}):this.dialogRef.close()}onCancel(){this.dialogRef.close()}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(d.ok),t.rXU(m.CP),t.rXU(v._),t.rXU(E.J),t.rXU(m.Vh))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-client-dialog"]],decls:58,vars:5,consts:[["mat-dialog-title","",2,"font-size","24px","font-weight","bold","color","#3f51b5","text-align","center","margin-bottom","16px"],["mat-dialog-content","",2,"display","flex","flex-direction","column","gap","16px","padding","16px"],[2,"display","flex","flex-direction","column","gap","16px",3,"formGroup"],[2,"display","flex","gap","16px"],["appearance","outline","id","letraRIF",2,"flex","0.3"],["formControlName","letraRIF"],["value","V"],["value","E"],["value","J"],["value","P"],["value","G"],["value","C"],["appearance","outline",2,"flex","0.5"],["matInput","","formControlName","rif"],["appearance","outline",2,"flex","1"],["matInput","","formControlName","nombreFiscal"],["matInput","","formControlName","direccion"],["matInput","","formControlName","telefono"],["matInput","","formControlName","email"],["matInput","","formControlName","contactoPrincipal"],[2,"display","flex","flex-direction","column","gap","16px"],[2,"margin","0"],["formArrayName","sucursales"],["style","display: flex; flex-direction: column; gap: 16px;",3,"formGroupName",4,"ngFor","ngForOf"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],["mat-dialog-actions","",2,"display","flex","justify-content","flex-end","gap","8px","margin-top","16px"],["mat-button","",3,"click"],["mat-flat-button","",3,"click",4,"ngIf"],[2,"display","flex","flex-direction","column","gap","16px",3,"formGroupName"],["matInput","","formControlName","nombre"],["matInput","","formControlName","estado"],["matInput","","formControlName","ciudad"],["mat-icon-button","","color","warn",3,"click","disabled"],["mat-stroked-button","","color","primary",3,"click"],["mat-flat-button","",3,"click"]],template:function(o,n){if(1&o&&(t.j41(0,"h1",0),t.EFF(1),t.k0s(),t.j41(2,"div",1)(3,"form",2)(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),t.EFF(7,"Documento"),t.k0s(),t.j41(8,"mat-select",5)(9,"mat-option",6),t.EFF(10,"V"),t.k0s(),t.j41(11,"mat-option",7),t.EFF(12,"E"),t.k0s(),t.j41(13,"mat-option",8),t.EFF(14,"J"),t.k0s(),t.j41(15,"mat-option",9),t.EFF(16,"P"),t.k0s(),t.j41(17,"mat-option",10),t.EFF(18,"G"),t.k0s(),t.j41(19,"mat-option",11),t.EFF(20,"C"),t.k0s()()(),t.j41(21,"mat-form-field",12)(22,"mat-label"),t.EFF(23,"RIF"),t.k0s(),t.nrm(24,"input",13),t.k0s()(),t.j41(25,"div",3)(26,"mat-form-field",14)(27,"mat-label"),t.EFF(28,"Nombre Fiscal"),t.k0s(),t.nrm(29,"input",15),t.k0s()(),t.j41(30,"div",3)(31,"mat-form-field",14)(32,"mat-label"),t.EFF(33,"Direcci\xf3n"),t.k0s(),t.nrm(34,"input",16),t.k0s(),t.j41(35,"mat-form-field",14)(36,"mat-label"),t.EFF(37,"Tel\xe9fono"),t.k0s(),t.nrm(38,"input",17),t.k0s()(),t.j41(39,"div",3)(40,"mat-form-field",14)(41,"mat-label"),t.EFF(42,"Email"),t.k0s(),t.nrm(43,"input",18),t.k0s(),t.j41(44,"mat-form-field",14)(45,"mat-label"),t.EFF(46,"Contacto Principal"),t.k0s(),t.nrm(47,"input",19),t.k0s()(),t.j41(48,"div",20)(49,"h3",21),t.EFF(50,"Sucursales"),t.k0s(),t.j41(51,"div",22),t.DNE(52,k,27,2,"div",23),t.k0s(),t.DNE(53,j,2,0,"button",24),t.k0s()()(),t.j41(54,"div",25)(55,"button",26),t.bIt("click",function(){return n.onCancel()}),t.EFF(56,"Cancelar"),t.k0s(),t.DNE(57,R,2,0,"button",27),t.k0s()),2&o){let s;t.R7$(),t.SpI(" ",n.isAdd?"Nuevo Cliente":(n.isEdit?"Editar Cliente ":"Ver Cliente ")+((null==(s=n.clientForm.get("nombreFiscal"))?null:s.value)||"")," "),t.R7$(2),t.Y8G("formGroup",n.clientForm),t.R7$(49),t.Y8G("ngForOf",n.sucursales.controls),t.R7$(),t.Y8G("ngIf",n.isEdit),t.R7$(4),t.Y8G("ngIf",n.isEdit||n.isAdd)}},dependencies:[f.MD,f.Sq,f.bT,b.Hu,u.Hl,u.$z,u.iY,p.m_,p.An,r.tP,m.hM,m.BI,m.E7,m.Yi,d.X1,d.qT,d.me,d.BC,d.cb,d.j4,d.JD,d.$R,d.v8,h.RG,h.rl,h.nJ,_.fS,_.fg,F.Ve,F.VO,x.wT],styles:['@charset "UTF-8";.mat-dialog-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:16px}.mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.mat-form-field[_ngcontent-%COMP%]{width:100%}.mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}.mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:80px}.dialog-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#3f51b5;text-align:center;margin-bottom:16px}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form-field[_ngcontent-%COMP%]{width:100%}.dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;margin-top:16px}.dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:80px}.mat-form-field-disabled[_ngcontent-%COMP%]   .mat-form-field-infix[_ngcontent-%COMP%]{opacity:.7}  .mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 70%, transparent))!important}']})}}return i})();var I=c(8257),D=c(4796);function P(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," RIF "),t.k0s())}function S(i,l){if(1&i&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.rif," ")}}function T(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," Nombre Fiscal "),t.k0s())}function O(i,l){if(1&i&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.nombreFiscal," ")}}function y(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," Direcci\xf3n "),t.k0s())}function N(i,l){if(1&i&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.direccion," ")}}function M(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," Tel\xe9fono "),t.k0s())}function G(i,l){if(1&i&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.telefono," ")}}function $(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," Email "),t.k0s())}function w(i,l){if(1&i&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.email," ")}}function V(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," Contacto Principal "),t.k0s())}function A(i,l){if(1&i&&(t.j41(0,"td",17),t.EFF(1),t.k0s()),2&i){const e=l.$implicit;t.R7$(),t.SpI(" ",e.contactoPrincipal," ")}}function X(i,l){1&i&&(t.j41(0,"th",16),t.EFF(1," Acciones "),t.k0s())}function Y(i,l){if(1&i){const e=t.RV6();t.j41(0,"td",17)(1,"div",18)(2,"button",19),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.openView(n))}),t.EFF(3,"Detalles"),t.k0s(),t.j41(4,"button",20),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.openEdit(n))}),t.EFF(5,"Editar"),t.k0s(),t.j41(6,"button",21),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.deleteClient(n._id))}),t.EFF(7,"Borrar"),t.k0s()()()}}function U(i,l){1&i&&t.nrm(0,"tr",22)}function B(i,l){1&i&&t.nrm(0,"tr",23)}function z(i,l){if(1&i&&(t.j41(0,"div")(1,"table",4),t.qex(2,5),t.DNE(3,P,2,0,"th",6)(4,S,2,1,"td",7),t.bVm(),t.qex(5,8),t.DNE(6,T,2,0,"th",6)(7,O,2,1,"td",7),t.bVm(),t.qex(8,9),t.DNE(9,y,2,0,"th",6)(10,N,2,1,"td",7),t.bVm(),t.qex(11,10),t.DNE(12,M,2,0,"th",6)(13,G,2,1,"td",7),t.bVm(),t.qex(14,11),t.DNE(15,$,2,0,"th",6)(16,w,2,1,"td",7),t.bVm(),t.qex(17,12),t.DNE(18,V,2,0,"th",6)(19,A,2,1,"td",7),t.bVm(),t.qex(20,13),t.DNE(21,X,2,0,"th",6)(22,Y,8,0,"td",7),t.bVm(),t.DNE(23,U,1,0,"tr",14)(24,B,1,0,"tr",15),t.k0s()()),2&i){const e=t.XpG();t.R7$(),t.Y8G("dataSource",e.clients),t.R7$(22),t.Y8G("matHeaderRowDef",e.displayedColumns),t.R7$(),t.Y8G("matRowDefColumns",e.displayedColumns)}}function L(i,l){1&i&&(t.j41(0,"div")(1,"p"),t.EFF(2,"Cargando clientes..."),t.k0s()())}function H(i,l){1&i&&(t.j41(0,"div")(1,"p"),t.EFF(2,"No hay clientes disponibles."),t.k0s()())}const J=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"",children:[{path:"list",component:(()=>{class i{constructor(e,o,n,s){this.clientsService=e,this.notificationService=o,this.authService=n,this.dialog=s,this.clients=[],this.typeOfUser=5,this.displayedColumns=["rif","nombreFiscal","direccion","telefono","email","contactoPrincipal","acciones"],this.isLoading=!1}ngOnInit(){this.authService.getTypeOfUser().subscribe(e=>{this.typeOfUser=e}),this.isLoading=!0,this.clientsService.getClients().subscribe(e=>{1==e.code?this.clients=e.data:this.notificationService.showError(e.message),this.isLoading=!1})}openView(e){this.dialog.open(g,{width:"600px",data:{client:e,isEdit:!1,isAdd:!1}})}openEdit(e){this.dialog.open(g,{width:"600px",data:{client:e,isEdit:!0}}).afterClosed().subscribe(n=>{n&&(this.ngOnInit(),console.log(n))})}deleteClient(e){this.dialog.open(I.D,{width:"400px",data:{message:"\xbfEst\xe1 seguro de que desea eliminar este cliente?"}}).afterClosed().subscribe(n=>{n&&this.clientsService.deleteClient(e).subscribe(s=>{1==s.code?(this.notificationService.showSuccess("Cliente eliminado correctamente"),this.ngOnInit()):(console.log(s),this.notificationService.showError(s.message))})})}openAddClient(){this.dialog.open(g,{width:"1000px",data:{client:{},isAdd:!0,isEdit:!0}}).afterClosed().subscribe(o=>{o&&(this.ngOnInit(),console.log(o))})}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(v._),t.rXU(E.J),t.rXU(D.u),t.rXU(m.bZ))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-clients"]],decls:10,vars:3,consts:[[1,"clients-container"],[1,"title"],["mat-raised-button","","color","primary",1,"add-button",3,"click"],[4,"ngIf"],["mat-table","",1,"mat-elevation-z8","clients-table",3,"dataSource"],["matColumnDef","rif"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","nombreFiscal"],["matColumnDef","direccion"],["matColumnDef","telefono"],["matColumnDef","email"],["matColumnDef","contactoPrincipal"],["matColumnDef","acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[2,"display","flex","gap","5px"],["mat-stroked-button","","color","accent",3,"click"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","",1,"warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"h2",1),t.EFF(2,"Lista de Clientes"),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){return n.openAddClient()}),t.j41(4,"mat-icon"),t.EFF(5,"add"),t.k0s(),t.EFF(6," Agregar Cliente "),t.k0s(),t.DNE(7,z,25,3,"div",3)(8,L,3,0,"div",3)(9,H,3,0,"div",3),t.k0s()),2&o&&(t.R7$(7),t.Y8G("ngIf",n.clients&&n.clients.length>0),t.R7$(),t.Y8G("ngIf",n.isLoading),t.R7$(),t.Y8G("ngIf",!n.clients||0===n.clients.length&&!n.isLoading))},dependencies:[f.MD,f.bT,b.Hu,u.Hl,u.$z,p.m_,p.An,r.tP,r.Zl,r.tL,r.ji,r.cC,r.YV,r.iL,r.KS,r.$R,r.YZ,r.NB],styles:[".warn[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.clients-container[_ngcontent-%COMP%]{position:relative;padding:16px}.add-button[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px}.clients-table[_ngcontent-%COMP%]{width:100%;margin-top:40px}.mat-header-cell[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:700}.printers-container[_ngcontent-%COMP%]{padding:16px}.title[_ngcontent-%COMP%]{text-align:center;font-size:24px;margin-bottom:16px;color:#3f51b5}.printers-table[_ngcontent-%COMP%]{width:100%;margin:16px 0;border-collapse:collapse}.mat-header-cell[_ngcontent-%COMP%], .mat-cell[_ngcontent-%COMP%]{padding:16px;text-align:left}.mat-header-cell[_ngcontent-%COMP%]{background-color:#f5f5f5;font-weight:700;border-bottom:2px solid #e0e0e0}.mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}.mat-row[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.mat-button[_ngcontent-%COMP%]{color:#1976d2}.mat-elevation-z8[_ngcontent-%COMP%]{box-shadow:0 3px 6px #00000029,0 3px 6px #0000003b}"]})}}return i})()}]}]}}]);